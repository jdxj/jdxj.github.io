---
title: "段"
date: 2023-08-27T10:07:20+08:00
tags:
  - x86
  - asm
---

# 定义段

```nasm
SECTION 段名称
; 或
SEGMENT 段名称
```

未定义段的内容自成一个段

在编写源程序时定义的段也必须至少按16字节对齐。

要在编写程序时指定段的对齐方式，应该使用“align=”子句，并指定一个具体的对齐。

- “align=16”就表示段是16字节对齐的
- “align=32”就表示段是32字节对齐的。

用户程序的一般结构

![](https://res.weread.qq.com/wrepub/CB_3300050845_txt011_3.jpg)

```nasm
section data1 align=16
        db 0x55

section data2 align=16
        db 0xaa

section data3 align=16
        db 0x99
```

每个段都有一个汇编地址，它是相对于整个程序开头(0)的。为了方便取得该段的汇编地址，NASM编译器提供了以下的表达式

```nasm
section.段名称.start
```

“vstart=0”子句使该段中的标号相对于该段计算, 而不是程序的开头
