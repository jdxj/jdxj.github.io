---
title: ": 进入命令行模式"
date: 2023-07-26T14:52:23+08:00
tags:
  - vim
  - vim-cli
---

出于历史原因，在命令行模式中执行的命令又被称做 Ex 命令

在我们按`/`调出查找提示符或用[`<C-r>=`]({{< ref "posts/articles/jdxj/vim/表达式寄存器.md" >}})访问表达式寄存器时，命令行模式也会被激活。

查看ex命令

```
:h ex-cmd-index
```

![](https://res.weread.qq.com/wrepub/epub_729213_91)

有些命令在插入模式和命令行模式中可以通用。例如，可以用`<C-w>`和`<C-u>`分别删除至上个单词的开头及行首，也可以用`<C-v>`或`<C-k>`来插入键盘上找
不到的字符，还可以用`<C-r>{register}`命令把任意寄存器的内容插入到命令行. 然而，有些命令行模式中的组合键在插入模式中不存在

# ex命令

## :print

回显当前行, 简写`:p`

可以合起来使用命令

```
:3p
```

# [range]

可以用行号、位置标记或是查找模式来指定范围的开始位置及结束位置。

## 行号

把光标移动到该数字所指定的行上

```
:1
```

### :{start},{end}指定行范围

```
:2,5p
:.,$p
```

## 位置标记

### $ 文件末尾

### % 当前文件所有行

```
:%p
:%s/Practical/Pragmatic/
```

## 用高亮选区指定范围

在可视模式下高亮选区后, 按下`:`后, 在命令行出现`:'<,'>`

- `'<`表示选区首行
- `'>`表示选区末行

之后再输入要执行的命令.

## 用模式指定范围

与:{start},{end}类似, 使用:/start/,/end/形式, 特殊字符需要转义

```
:/<html>/,/<\/html>/p
```

## 用偏移对地址进行修正

偏移的一般形式

```
:{address}+n
```

如果 n 被省略，那么缺省偏移量为1。{address} 可以是一个行号、一个位置标记，或是一个查找模式。

```
:.,.+3p
:/<html>/+1,/<\/html>/-1p
```

# 结论

定义范围的语法非常灵活，既可以混合搭配行号、位置标记以及查找模式，也可以对它们加以偏移。

![](https://res.weread.qq.com/wrepub/epub_729213_95)

第0行在文件中并不真实存在，但它作为一个地址，在某些特定场景下会很有用处。特别是，在把指定范围内的行复制或移动到文件开头时，可以用它做
:copy{address} 及 :move{address} 命令的最后一个参数。

在定义一个[range]时，它总是代表一系列连续行，不过 :global 命令也可以在一系列非连续行上执行Ex 命令
