---
title: "第1章 SQL优化必懂概念"
date: 2023-06-18T23:53:25+08:00
draft: true
tags:
  - ""
---

## 1.1　基数（CARDINALITY）

某个列唯一键（Distinct_Keys）的数量叫作基数。

一个结论

- 当查询结果是返回表中5%以内的数据时，应该走索引；
- 当查询结果返回的是超过表中5%的数据时，应该走全表扫描。

## 1.2　选择性（SELECTIVITY）

基数与总行数的比值再乘以100%就是某个列的选择性。

**什么样的列必须建立索引呢？**

// todo: 没看懂

当一个列出现在where条件中，该列没有创建索引并且选择性大于20%，那么该列就必须创建索引，从而提升SQL查询性能。当然了，如果表只有几百条数据，那我们
就不用创建索引了。

## 1.3　直方图（HISTOGRAM）

如果没有对基数低的列收集直方图统计信息，基于成本的优化器（CBO）会认为该列数据分布是均衡的。

## 1.4　回表（TABLE ACCESS BY INDEX ROWID）

如果回表次数太多，就不应该走索引扫描了，应该直接走全表扫描。
