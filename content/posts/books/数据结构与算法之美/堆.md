---
title: "堆"
date: 2023-06-12T16:24:58+08:00
---

堆排序是一种原地的、时间复杂度为 O(nlogn) 的排序算法。

- 堆是一个完全二叉树；
- 堆中每一个节点的值都必须大于等于（或小于等于）其子树中每个节点的值。

用数组存储堆的例子

![](https://static001.geekbang.org/resource/image/4d/1e/4d349f57947df6590a2dd1364c3b0b1e.jpg?wh=1142*540)

- 往堆中插入一个元素

![](https://static001.geekbang.org/resource/image/e3/0e/e3744661e038e4ae570316bc862b2c0e.jpg?wh=1142*776)

- 删除堆顶元素

![](https://static001.geekbang.org/resource/image/11/60/110d6f442e718f86d2a1d16095513260.jpg?wh=1142*856)

# 如何基于堆实现排序？

1. 建堆

![](https://static001.geekbang.org/resource/image/50/1e/50c1e6bc6fe68378d0a66bdccfff441e.jpg?wh=1142*807)
![](https://static001.geekbang.org/resource/image/aa/9d/aabb8d15b1b92d5e040895589c60419d.jpg?wh=1142*856)

- 建堆的时间复杂度就是 O(n)。

2. 排序

![](https://static001.geekbang.org/resource/image/23/d1/23958f889ca48dbb8373f521708408d1.jpg?wh=1142*790)

- 原地
- 建堆O(n), 排序O(nlogN)
- 不稳定

# 为什么快速排序要比堆排序性能好？

- 对 CPU 缓存是不友好的
- 对于同样的数据，在排序过程中，堆排序算法的数据交换次数要多于快速排序
