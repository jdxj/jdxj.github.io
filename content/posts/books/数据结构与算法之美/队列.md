---
title: "队列"
date: 2023-05-26T15:49:38+08:00
---

先进者先出，这就是典型的“队列”。

# 循环队列

要想写出没有 bug 的循环队列的实现代码最关键的是，确定好队空和队满的判定条件。

- 队空 head == tail
- 队满 head == (tail+1)%n

![](https://static001.geekbang.org/resource/image/3d/ec/3d81a44f8c42b3ceee55605f9aeedcec.jpg?wh=1142*640)

# 阻塞队列

- 就是在队列为空的时候，从队头取数据会被阻塞
- 果队列已经满了，那么插入数据的操作就会被阻塞

# 并发队列

线程安全的队列我们叫作并发队列。最简单直接的实现方式是直接在 enqueue()、dequeue() 方法上加锁，但是锁粒度大并发度会比较低，同一时刻仅允许一个存
或者取操作。实际上，基于数组的循环队列，利用 CAS 原子操作，可以实现非常高效的并发队列。
