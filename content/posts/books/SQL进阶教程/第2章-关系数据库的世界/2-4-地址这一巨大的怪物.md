---
title: "2-4 地址这一巨大的怪物"
date: 2023-03-14T21:07:48+08:00
draft: false
---

# 写在前面

关系数据库中不存在编程语言中一般被称为“指针”的物理性数据结构。但是严格来说，它其实是存在的，只不过被隐藏了，因而对用户不可见。

不过，如果这么说，可能会有人列举出用户可以使用的指针，比如Oracle中的rowid或PostgreSQL中的oid来反对。确实，用户可以使用这些指针，但是它们
都是个别数据库厂商违反SQL标准而进行的扩展，而标准SQL一直在努力摆脱指针。

# 关系模型是为摆脱地址而生

在关系模型中，我们通过完全**关联的编址**来代替位置编址。

- 在关系数据库中，每个数据可以借助于关系名、主键的值以及属性名唯一地编址。这种形式的关联地址使用户（是的，也使得程序员）把以下两点留给系统来
  完成：
  - 确定要插入数据库的一块新信息的放置细节；
  - 当检索数据时选择适当的存取通路。
- 这里说的“地址”不仅包括指针操作的地址，还包括数组下标等。
- 数据库中的关系无论如何都不能具有指针的那些属性。众所周知，关系数据库出现以前，数据库中充满了指针的概念，为了访问到想要的数据必须借助很多指
  针。对这些数据库进行应用程序编程时很容易出现错误，而且数据不能由终端用户直接访问，这些问题都是指针导致的。

放弃地址的深刻意义是，通过放弃掉系统中没有意义的东西，创造出一个易于人类理解的有意义的世界。

> 所以写代码也要偏向于易读而不是易写.

# 编程中泛滥的地址

是的，变量——它正是编程语言中地址的化身。所有的变量都由没有实际意义的地址管理着。而且，要想在面向过程语言中处理数据，只能通过把数据赋值给变量。
只要使用变量，就无法逃出地址的魔咒。反过来说，之所以SQL能成为不依赖于地址的自由的语言，也是因为它不使用变量。

# 不曾远去的老将——J.Backus的梦想

声明式语言SQL和函数式语言Lisp在当今的编程世界里都处于边缘，而且从来没有成为主流语言过。但是最近SQL中增加了许多丰富的功能，渐渐到了需要重新
评价SQL和函数式语言优点的时候了。“地址的解放战争”最终有怎样的归宿，现在还不好预测，但是笔者期待能够在不久的将来写一写它。
