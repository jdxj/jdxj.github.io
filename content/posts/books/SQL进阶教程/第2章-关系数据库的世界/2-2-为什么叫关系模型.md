---
title: "2-2 为什么叫关系模型"
date: 2023-03-13T20:47:10+08:00
draft: false
---

# 为什么不叫“表”模型

Codd:

1. 当初思考关系模型的时候，从事数据处理工作的人们有一种普遍的观点，即认为多个对象之间的关系（或者关联）必须通过一种链接数据结构来表示。为了纠
  正这个误解，我特意选择了“关系模型”这个词作为名字；
2. 与关系相比，表的抽象度更低，容易给人可以像数组一样操作的印象，而n元关系就不会了。还有，数据库表中数据的内容和行的顺序没有关系，在这一点上表
  更容易带来误解。尽管表有这样的小缺点，但依然是表达关系概念时最重要的手段。毕竟表的概念人们更熟悉一些。

# 关系的定义

数据库采用了关系模型，因此才被称为关系数据库。

关系模型之父Codd本人也表示时不时地会收到这样的疑问，并给出了前文中的两个解释。

- 其中(1)与现在的数据库工程师没有什么关系。“链接数据结构”指的是使用指针连接数据的**链表结构**，这是分层模型和网状模型数据结构流行的时期特有
  的。
- 而(2)现在仍然有思考的价值，因为它触及了“关系”这一概念的本质。简单概括的话，关系和表看起来很相似，实质却不相同。

关系和表比较典型的区别。

- 关系中不允许存在重复的元组（tuple），而表中可以存在。即，关系是通常说的不允许存在重复元素的集合，而表是多重集合（multiset）
- 关系中的元组没有从上往下的顺序，而表中的行有从上往下的顺序
- 关系中的属性没有从左往右的顺序，而表中的列有从左往右的顺序
- 关系中所有的属性的值都是不可分割的，而表中列的值是可以分割的。换句话说，关系中的属性满足第一范式，而表中的列不满足第一范式

元组和属性是关系模型中较为正式的术语，与非正式的日常用语有以下对应关系

![](https://res.weread.qq.com/wrepub/epub_26211874_319)

关系的定义可以用下面这样一个公式来给出。

- 关系用符号R表示，属性用符号Ai表示，属性的定义域用符号Di表示

```
R ⊆（D1×D2×D3 · · · ×Dn）
```

这个公式读作“关系R是定义域D1, D2, …, Dn的笛卡儿积的子集”。

我们假设属性a1可以取1种值，属性a2可以取2种值，属性a3可以取3种值。各属性对应的定义域分别叫作d1、d2、d3。

```
    d1 = { 1 }
    d2 = { 男 , 女 }
    d3 = { 红 , 绿 , 黄 }
```

使用这3个定义域生成关系时，最大的元组数是多少？答案是6。计算方法很简单，就是1×2×3＝6。

![](https://res.weread.qq.com/wrepub/epub_26211874_320)

> 关系就是定义域间的组合?

# 定义域的忧虑

一段用Pascal语言写的代码

```pascal
        type Day = { Sun, Mon, Tue, Wed, Thu, Fri, Sat };
        var Today : Day;
```

现在的DBMS是具备简单的定义域功能的，只不过比较初级. 这些定义域主要是字符型、数值型等叫作标量类型的数据类型。因为它们对属性的取值范围有约束，
所以尽管有局限性，但是标量类型也是定义域的一种。

# 关系值和关系变量

值（value）和变量（variable）是很容易混淆的概念，在讨论和数据库相关的话题时，两者经常会被混用。一般提到“关系”这个词时，如果不加特殊说明，
指的都是“关系变量”。而关系值指的是关系变量在某一时刻取的值。实际上或许我们也可以说，值就是变量的时间切片（time-slice）。

这与数学或者编程语言中变量和值之间的关系是一样的。在编程语言中，整数型变量存储整数值。同样，在关系模型中，关系型变量存储关系值。理解了这一点，
我们应该就不会像刚接触这些概念时那样觉得不可思议了。关键在于我们在学校中学到的变量和值基本上都是标量型的**单一类型值**，所以只是不习惯把关系
这样的**复合型结构**看成一个值。**FROM子句中写的表名正是变量的名称**

# 存在“关系的关系”吗

这个问题可以替换成“存在递归的关系吗”或者“定义域中可以包含关系吗”。

“关系的关系”在逻辑上是可能存在的。但是，为此必须定义能够使定义域包含关系的谓词，而且如果再考虑对关系的量化，就需要实现二阶谓词逻辑，因此实现
“关系的关系”非常困难。

因此这里我们只简单地了解一下描述这种现实中还不存在的“关系的关系”的关系模型大概是什么样子。首先请看一个具体的表。

![](https://res.weread.qq.com/wrepub/epub_26211874_328)

如果接受了这种“关系的关系”，那么自然就能进一步扩展到“关系的关系的关系”或者“关系的关系的关系的关系”这样更高阶的关系。当然它们也都是嵌套式的递
归结构。
